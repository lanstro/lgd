Lgd.module('MainView', function(Mainview, Lgd, Backbone, Marionette, $, _){
	
	Mainview.Container = Marionette.CompositeView.extend ({
		tagName: 'div',
		template: JST['marionette/templates/main/container'],
		
		initialize: function(){
			this.collection = this.model.children;
		},
		
		id: function(){
			return this.model.get('id');
			return 1;
		},
		
		className: function(){
			return "depth_"+this.model.get('level');
		},

		events: {
			"mouseenter": "mouseEnter",
			"mouseleave": "mouseLeave",
			"click div.expand_modes": "moreClicked"
		},		
		
		mouseEnter: function(event){
			event.stopImmediatePropagation();
			// make controller handle it
			Lgd.trigger("container:mouseEnter", this.$el);
		},
		
		mouseLeave: function(event){
			event.stopImmediatePropagation();
			// make controller handle it
			Lgd.trigger("container:mouseLeave", this.$el);
		},
		
		moreClicked: function(event){
			event.stopImmediatePropagation();
			var alias = this.model.aliases()[0];
			alias = alias.substring(0, 1).toLowerCase() + alias.substring(1);
			Lgd.trigger("container:moreClicked", this.$el, this.model.get('id'), alias);
		}
	});
	
	Mainview.Act = Marionette.CollectionView.extend({

		template: JST['marionette/templates/main/act'],
		childView: Mainview.Container,
		childViewContainer: 'div'
		

	})
	
});


